init_map_africa_global_data = {
	set_variable = { global.map_africa_sahel_region_index = 0 }
	set_variable = { global.map_africa_center_region_index = 1 }
	set_variable = { global.map_africa_middle_east_region_index = 2 }
	set_variable = { global.map_africa_madagascar_region_index = 3 }
	set_variable = { global.map_africa_zimbabwe_region_index = 4 }
	set_variable = { global.map_africa_dr_congo_region_index = 5 }
	set_variable = { global.map_africa_venesuella_region_index = 6 }
	set_variable = { global.map_africa_libya_region_index = 7 }
	set_variable = { global.map_africa_sudan_region_index = 8 }
	set_variable = { global.map_africa_gvinea_region_index = 9 }
	
	# Info (How much there are regions)
	set_variable = { global.map_africa_region_indexes_count = 10 }

	# FORMULE
	# recommend = 0.1 * base * (thisInfluence - otherInfluence)
	# base = recommend / (0.1 * (thisInfluence - otherInfluence)

	WGN = { 
		init_map_africa_country_data = yes

		# Active regions
		set_variable = { map_africa_enabled_region_indexes^global.map_africa_center_region_index = 1 }
		set_variable = { map_africa_enabled_region_indexes^global.map_africa_middle_east_region_index = 1 }
		set_variable = { map_africa_enabled_region_indexes^global.map_africa_madagascar_region_index = 1 }
		set_variable = { map_africa_enabled_region_indexes^global.map_africa_zimbabwe_region_index = 1 }
		set_variable = { map_africa_enabled_region_indexes^global.map_africa_dr_congo_region_index = 1 }
		set_variable = { map_africa_enabled_region_indexes^global.map_africa_venesuella_region_index = 1 }
		set_variable = { map_africa_enabled_region_indexes^global.map_africa_libya_region_index = 1 }
		set_variable = { map_africa_enabled_region_indexes^global.map_africa_sudan_region_index = 1 }
		set_variable = { map_africa_enabled_region_indexes^global.map_africa_gvinea_region_index = 1 }

		# Setup initial human resources
		set_variable = { map_africa_manpower_pool_free = 0 }
		
		set_variable = { map_africa_political_strategists_pool_active = 0 }
		set_variable = { map_africa_military_instructors_pool_active = 0 }
		set_variable = { map_africa_military_personnel_pool_active = 0 }

		# Middle East
		set_variable = { map_africa_military_personnel_pool_indexes^global.map_africa_middle_east_region_index = 2025 }
		set_variable = { map_africa_political_strategists_pool_indexes^global.map_africa_middle_east_region_index = 15 }
		set_variable = { map_africa_military_instructors_pool_indexes^global.map_africa_middle_east_region_index = 250 }
		
		set_variable = { map_africa_interpreter_RUS^global.map_africa_middle_east_region_index = 7 }
		set_variable = { map_africa_interpreter_NTO^global.map_africa_middle_east_region_index = 3 }
		
		# Center
		set_variable = { map_africa_military_personnel_pool_indexes^global.map_africa_center_region_index = 1650 }
		set_variable = { map_africa_political_strategists_pool_indexes^global.map_africa_center_region_index = 20 }
		set_variable = { map_africa_military_instructors_pool_indexes^global.map_africa_center_region_index = 325 }
		
		set_variable = { map_africa_interpreter_RUS^global.map_africa_center_region_index = 9 }
		set_variable = { map_africa_interpreter_NTO^global.map_africa_center_region_index = 1 }
		
		# Madagascar
		set_variable = { map_africa_military_personnel_pool_indexes^global.map_africa_madagascar_region_index = 20 }
		set_variable = { map_africa_political_strategists_pool_indexes^global.map_africa_madagascar_region_index = 7 }
		set_variable = { map_africa_military_instructors_pool_indexes^global.map_africa_madagascar_region_index = 7 }
		
		set_variable = { map_africa_interpreter_RUS^global.map_africa_madagascar_region_index = 4 }
		set_variable = { map_africa_interpreter_NTO^global.map_africa_madagascar_region_index = 6 }
		
		# Zimbabwe
		set_variable = { map_africa_military_personnel_pool_indexes^global.map_africa_zimbabwe_region_index = 15 }
		set_variable = { map_africa_political_strategists_pool_indexes^global.map_africa_zimbabwe_region_index = 5 }
		set_variable = { map_africa_military_instructors_pool_indexes^global.map_africa_zimbabwe_region_index = 12 }
		
		set_variable = { map_africa_interpreter_RUS^global.map_africa_zimbabwe_region_index = 4 }
		set_variable = { map_africa_interpreter_NTO^global.map_africa_zimbabwe_region_index = 6 }
		
		# DR Congo
		set_variable = { map_africa_military_personnel_pool_indexes^global.map_africa_dr_congo_region_index = 50 }
		set_variable = { map_africa_political_strategists_pool_indexes^global.map_africa_dr_congo_region_index = 5 }
		set_variable = { map_africa_military_instructors_pool_indexes^global.map_africa_dr_congo_region_index = 10 }
		
		set_variable = { map_africa_interpreter_RUS^global.map_africa_dr_congo_region_index = 2 }
		set_variable = { map_africa_interpreter_NTO^global.map_africa_dr_congo_region_index = 8 }
		
		# Venesuella
		set_variable = { map_africa_military_personnel_pool_indexes^global.map_africa_venesuella_region_index = 60 }
		set_variable = { map_africa_political_strategists_pool_indexes^global.map_africa_venesuella_region_index = 7 }
		set_variable = { map_africa_military_instructors_pool_indexes^global.map_africa_venesuella_region_index = 15 }
		
		set_variable = { map_africa_interpreter_RUS^global.map_africa_venesuella_region_index = 9 }
		set_variable = { map_africa_interpreter_NTO^global.map_africa_venesuella_region_index = 1 }
		
		# Libya
		set_variable = { map_africa_military_personnel_pool_indexes^global.map_africa_libya_region_index = 915 }
		set_variable = { map_africa_political_strategists_pool_indexes^global.map_africa_libya_region_index = 12 }
		set_variable = { map_africa_military_instructors_pool_indexes^global.map_africa_libya_region_index = 150 }
		
		set_variable = { map_africa_interpreter_RUS^global.map_africa_libya_region_index = 6 }
		set_variable = { map_africa_interpreter_NTO^global.map_africa_libya_region_index = 4 }
		
		# Sudan
		set_variable = { map_africa_military_personnel_pool_indexes^global.map_africa_sudan_region_index = 515 }
		set_variable = { map_africa_political_strategists_pool_indexes^global.map_africa_sudan_region_index = 15 }
		set_variable = { map_africa_military_instructors_pool_indexes^global.map_africa_sudan_region_index = 120 }
		
		set_variable = { map_africa_interpreter_RUS^global.map_africa_sudan_region_index = 6 }
		set_variable = { map_africa_interpreter_NTO^global.map_africa_sudan_region_index = 4 }
		
		# Gvinea
		set_variable = { map_africa_military_personnel_pool_indexes^global.map_africa_gvinea_region_index = 10 }
		set_variable = { map_africa_political_strategists_pool_indexes^global.map_africa_gvinea_region_index = 5 }
		set_variable = { map_africa_military_instructors_pool_indexes^global.map_africa_gvinea_region_index = 5 }
		
		set_variable = { map_africa_interpreter_RUS^global.map_africa_gvinea_region_index = 3 }
		set_variable = { map_africa_interpreter_NTO^global.map_africa_gvinea_region_index = 7 }

		# CALCULATE RECOMMENDED BASE values from CURRENT manpower values
		map_africa_calculate_RUS_all_regions_recommended_base_pool_value = yes
	}
}


init_map_africa_country_data = {
	set_country_flag = map_africa

	resize_array = { map_africa_enabled_region_indexes = global.map_africa_region_indexes_count }

	resize_array = { map_africa_political_strategists_pool_indexes = global.map_africa_region_indexes_count }
	resize_array = { map_africa_political_strategists_used_effective_pool_indexes = global.map_africa_region_indexes_count }
	resize_array = { map_africa_military_instructors_pool_indexes = global.map_africa_region_indexes_count }
	resize_array = { map_africa_military_personnel_pool_indexes = global.map_africa_region_indexes_count }

	resize_array = { map_africa_political_strategists_recommended_pool_indexes = global.map_africa_region_indexes_count }
	resize_array = { map_africa_military_instructors_recommended_pool_indexes = global.map_africa_region_indexes_count }
	resize_array = { map_africa_military_personnel_recommended_pool_indexes = global.map_africa_region_indexes_count }

	resize_array = { map_africa_political_strategists_recommended_base_pool_indexes = global.map_africa_region_indexes_count }
	resize_array = { map_africa_military_instructors_recommended_base_pool_indexes = global.map_africa_region_indexes_count }
	resize_array = { map_africa_military_personnel_recommended_base_pool_indexes = global.map_africa_region_indexes_count }

	resize_array = { map_africa_interpreter_RUS = global.map_africa_region_indexes_count }
	resize_array = { map_africa_interpreter_NTO = global.map_africa_region_indexes_count }
}

map_africa_calculate_RUS_all_regions_recommended_base_pool_value = {
	for_each_loop = {
		array = map_africa_enabled_region_indexes
		index = temp_region_index
		value = temp_is_enabled

		if = {
			limit = { check_variable = { temp_is_enabled = 1 } }
			map_africa_calculate_RUS_region_recommended_base_pool_value = yes
		}
	}
}

map_africa_calculate_RUS_all_regions_recommended_pool_value = {
	log = "num = [?map_africa_enabled_region_indexes^num]"
	for_each_loop = {
		array = map_africa_enabled_region_indexes
		index = temp_region_index
		value = temp_is_enabled

		log = "___[?temp_region_index] = [?temp_is_enabled]"

		if = {
			limit = { check_variable = { temp_is_enabled = 1 } }
			map_africa_calculate_RUS_region_recommended_pool_value = yes
		}
	}
}

# Use it directly for each map_africa_region that has been enabled for RUS after you enabled it
#
# Must contain "temp_region_index"
map_africa_calculate_RUS_region_recommended_base_pool_value = {
	set_temp_variable = { temp_this_influence = map_africa_interpreter_RUS^temp_region_index }
	set_temp_variable = { temp_other_influence = map_africa_interpreter_NTO^temp_region_index }
	map_africa_calculate_recommended_base_pool_value_from_current_pool_value = yes
}

# Use it directly for each map_africa_region that has been enabled for RUS after you enabled it
#
# Must contain "temp_region_index"
map_africa_calculate_RUS_region_recommended_pool_value = {
	set_temp_variable = { temp_this_influence = map_africa_interpreter_RUS^temp_region_index }
	set_temp_variable = { temp_other_influence = map_africa_interpreter_NTO^temp_region_index }
	map_africa_calculate_recommended_pool_value_from_recommended_base_pool_value = yes
}

map_africa_calculate_NTO_all_regions_recommended_base_pool_value = {
	for_each_loop = {
		array = map_africa_enabled_region_indexes
		index = temp_region_index
		value = temp_is_enabled

		if = {
			limit = { check_variable = { temp_is_enabled = 1 } }
			map_africa_calculate_NTO_region_recommended_base_pool_value = yes
		}
	}
}

map_africa_calculate_NTO_all_regions_recommended_pool_value = {
	for_each_loop = {
		array = map_africa_enabled_region_indexes
		index = temp_region_index
		value = temp_is_enabled

		if = {
			limit = { check_variable = { temp_is_enabled = 1 } }
			map_africa_calculate_NTO_region_recommended_pool_value = yes
		}
	}
}

# Use it directly for each map_africa_region that has been enabled for NTO after you enabled it
#
# Must contain "temp_region_index"
map_africa_calculate_NTO_region_recommended_base_pool_value = {
	set_temp_variable = { temp_this_influence = map_africa_interpreter_NTO^temp_region_index }
	set_temp_variable = { temp_other_influence = map_africa_interpreter_RUS^temp_region_index }
	map_africa_calculate_recommended_base_pool_value_from_current_pool_value = yes
}

# Use it directly for each map_africa_region that has been enabled for NTO after you enabled it
#
# Must contain "temp_region_index"
map_africa_calculate_NTO_region_recommended_pool_value = {
	set_temp_variable = { temp_this_influence = map_africa_interpreter_NTO^temp_region_index }
	set_temp_variable = { temp_other_influence = map_africa_interpreter_RUS^temp_region_index }
	map_africa_calculate_recommended_pool_value_from_recommended_base_pool_value = yes
}

# Calculates a RECOMMENDED BASE manpower values based on CURRENT values for exact region
#
# SCOPE is COUNTRY
# Must contain "temp_region_index"
# Must contain "temp_this_influence"
# Must contain "temp_other_influence"
map_africa_calculate_recommended_base_pool_value_from_current_pool_value = {
	set_temp_variable = { temp_demiliter = temp_this_influence }
	subtract_from_temp_variable = { temp_demiliter = temp_other_influence }
	multiply_temp_variable = { temp_demiliter = 0.1 }

	set_variable = { 
		var = map_africa_political_strategists_recommended_base_pool_indexes^temp_region_index 
		value = map_africa_political_strategists_pool_indexes^temp_region_index 
	}
	divide_variable = { map_africa_political_strategists_recommended_base_pool_indexes^temp_region_index = temp_demiliter }
	
	set_variable = { 
		var = map_africa_military_instructors_recommended_base_pool_indexes^temp_region_index
		value = map_africa_military_instructors_pool_indexes^temp_region_index 
	}
	divide_variable = { map_africa_military_instructors_recommended_base_pool_indexes^temp_region_index = temp_demiliter }
	
	set_variable = { 
		var = map_africa_military_personnel_recommended_base_pool_indexes^temp_region_index 
		value = map_africa_military_personnel_pool_indexes^temp_region_index 
	}
	divide_variable = { map_africa_military_personnel_recommended_base_pool_indexes^temp_region_index = temp_demiliter }
}

# Calculates a RECOMMENDED manpower values based on RECOMMENDED BASE values for exact region
#
# SCOPE is COUNTRY
# Must contain "temp_region_index"
# Must contain "temp_this_influence"
# Must contain "temp_other_influence"
map_africa_calculate_recommended_pool_value_from_recommended_base_pool_value = {
	#log = "###### [?THIS.GetTag]"
	#log = "temp_region_index [?temp_region_index]"
	#log = "temp_this_influence [?temp_this_influence]"
	#log = "temp_other_influence [?temp_other_influence]"

	set_temp_variable = { temp_multiplier = temp_this_influence }
	subtract_from_temp_variable = { temp_multiplier = temp_other_influence }
	multiply_temp_variable = { temp_multiplier = 0.1 }
	
	#log = "temp_multiplier [?temp_multiplier]"

	set_variable = { 
		var = map_africa_political_strategists_recommended_pool_indexes^temp_region_index 
		value = map_africa_political_strategists_recommended_base_pool_indexes^temp_region_index 
	}
	
	#log = "map_africa_political_strategists_recommended_pool_indexes^temp_region_index [?map_africa_political_strategists_recommended_pool_indexes^temp_region_index]"
	#log = "map_africa_political_strategists_recommended_base_pool_indexes^temp_region_index [?map_africa_political_strategists_recommended_base_pool_indexes^temp_region_index]"
	multiply_variable = { map_africa_political_strategists_recommended_pool_indexes^temp_region_index = temp_multiplier }
	round_variable = map_africa_political_strategists_recommended_pool_indexes^temp_region_index

	# Запрещаем получать прибыль с политтехнологов, выделенных сверх рекомендуемого значения
	if = {
		limit = { check_variable = { map_africa_political_strategists_recommended_pool_indexes^temp_region_index < map_africa_political_strategists_pool_indexes^temp_region_index } }

		set_variable = { map_africa_political_strategists_used_effective_pool_indexes^temp_region_index = map_africa_political_strategists_recommended_pool_indexes^temp_region_index }
	}
	else = {
		set_variable = { map_africa_political_strategists_used_effective_pool_indexes^temp_region_index = map_africa_political_strategists_pool_indexes^temp_region_index }
	}

	#log = "map_africa_political_strategists_recommended_pool_indexes^temp_region_index [?map_africa_political_strategists_recommended_pool_indexes^temp_region_index]"
	
	set_variable = { 
		var = map_africa_military_instructors_recommended_pool_indexes^temp_region_index
		value = map_africa_military_instructors_recommended_base_pool_indexes^temp_region_index 
	}
	multiply_variable = { map_africa_military_instructors_recommended_pool_indexes^temp_region_index = temp_multiplier }
	round_variable = map_africa_military_instructors_recommended_pool_indexes^temp_region_index
	
	set_variable = { 
		var = map_africa_military_personnel_recommended_pool_indexes^temp_region_index 
		value = map_africa_military_personnel_recommended_base_pool_indexes^temp_region_index 
	}
	multiply_variable = { map_africa_military_personnel_recommended_pool_indexes^temp_region_index = temp_multiplier }
	round_variable = map_africa_military_personnel_recommended_pool_indexes^temp_region_index
}


# Calculates sum used count of each variant of manpower
map_africa_calculate_sum_used_manpower = {
	set_variable = { map_africa_political_strategists_used = 0 }
	set_variable = { map_africa_political_strategists_used_effective = 0 }
	set_variable = { map_africa_military_instructors_used = 0 }
	set_variable = { map_africa_military_personnel_used = 0 }

	for_loop_effect = {
		end = global.map_africa_region_indexes_count
		value = pointer

		add_to_variable = { map_africa_political_strategists_used = map_africa_political_strategists_pool_indexes^pointer }
		add_to_variable = { map_africa_political_strategists_used_effective = map_africa_political_strategists_used_effective_pool_indexes^pointer }
		add_to_variable = { map_africa_military_instructors_used = map_africa_military_instructors_pool_indexes^pointer }
		add_to_variable = { map_africa_military_personnel_used = map_africa_military_personnel_pool_indexes^pointer }
	}

	set_variable = { map_africa_manpower_used = map_africa_military_instructors_used }
	add_to_variable = { map_africa_manpower_used = map_africa_military_personnel_used }
}

map_africa_calculate_sum_recommended_manpower = {
	set_variable = { map_africa_political_strategists_sum_recommended = 0 }
	set_variable = { map_africa_military_instructors_sum_recommended = 0 }
	set_variable = { map_africa_military_personnel_sum_recommended = 0 }

	for_loop_effect = {
		end = global.map_africa_region_indexes_count
		value = pointer

		add_to_variable = { map_africa_political_strategists_sum_recommended = map_africa_political_strategists_recommended_pool_indexes^pointer }
		add_to_variable = { map_africa_military_instructors_sum_recommended = map_africa_military_instructors_recommended_pool_indexes^pointer }
		add_to_variable = { map_africa_military_personnel_sum_recommended = map_africa_military_personnel_recommended_pool_indexes^pointer }
	}
	
	set_variable = { map_africa_manpower_sum_recommended = map_africa_military_instructors_sum_recommended }
	add_to_variable = { map_africa_manpower_sum_recommended = map_africa_military_personnel_sum_recommended }
}

# Calculates sum used count of one region of manpower
map_africa_calculate_region_used_manpower = {
	for_loop_effect = {
		end = global.map_africa_region_indexes_count
		value = pointer

		set_variable = { map_africa_political_strategists_used^pointer = 0 }
		set_variable = { map_africa_political_strategists_used_effective^pointer = 0 }
		set_variable = { map_africa_military_instructors_used^pointer = 0 }
		set_variable = { map_africa_military_personnel_used^pointer = 0 }

		add_to_variable = { map_africa_political_strategists_used^pointer = map_africa_political_strategists_pool_indexes^pointer }
		add_to_variable = { map_africa_political_strategists_used_effective^pointer = map_africa_political_strategists_used_effective_pool_indexes^pointer }
		add_to_variable = { map_africa_military_instructors_used^pointer = map_africa_military_instructors_pool_indexes^pointer }
		add_to_variable = { map_africa_military_personnel_used^pointer = map_africa_military_personnel_pool_indexes^pointer }
	}
}


# TRANSFERS POLITICAL STRATEGISTS BETWEEN REGION AND GLOBAL RESERVES
#
# THIS scope is COUNTRY
# Must contain "temp_target_region" - index of target region
# Must contain "temp_delta_manpower" - how much manpower to change
map_africa_change_political_strategists_used_in_region = {
	if = {
		limit = { check_variable = { temp_delta_manpower < 0 }}

		set_temp_variable = { temp_negative_used_manpower = -1 }
		multiply_temp_variable = { temp_negative_used_manpower = map_africa_political_strategists_pool_indexes^temp_target_region }

		clamp_temp_variable = {
			var = temp_delta_manpower
			min = temp_negative_used_manpower
		}
	}
	
	add_to_variable = { map_africa_political_strategists_pool_indexes^temp_target_region = temp_delta_manpower }
}

# TRANSFERS MILITARY INSTRUCTORS BETWEEN REGION AND GLOBAL RESERVES
#
# THIS scope is COUNTRY
# Must contain "temp_target_region" - index of target region
# Must contain "temp_delta_manpower" - how much manpower to change
map_africa_change_military_instructors_used_in_region = {
	if = {
		limit = { check_variable = { temp_delta_manpower < 0 }}

		set_temp_variable = { temp_negative_used_manpower = -1 }
		multiply_temp_variable = { temp_negative_used_manpower = map_africa_military_instructors_pool_indexes^temp_target_region }

		clamp_temp_variable = {
			var = temp_delta_manpower
			min = temp_negative_used_manpower
		}
	}
	else = {
		clamp_temp_variable = {
			var = temp_delta_manpower
			max = map_africa_manpower_pool_free
		}		
	}
	
	add_to_variable = { map_africa_military_instructors_pool_indexes^temp_target_region = temp_delta_manpower }
	subtract_from_variable = { map_africa_manpower_pool_free = temp_delta_manpower }
}

# TRANSFERS MILITARY PERSONNEL BETWEEN REGION AND GLOBAL RESERVES
#
# THIS scope is COUNTRY
# Must contain "temp_target_region" - index of target region
# Must contain "temp_delta_manpower" - how much manpower to change
map_africa_change_military_personnel_used_in_region = {		
	if = {
		limit = { check_variable = { temp_delta_manpower < 0 }}

		set_temp_variable = { temp_negative_used_manpower = -1 }
		multiply_temp_variable = { temp_negative_used_manpower = map_africa_military_personnel_pool_indexes^temp_target_region }

		clamp_temp_variable = {
			var = temp_delta_manpower
			min = temp_negative_used_manpower
		}
	}
	else = {
		clamp_temp_variable = {
			var = temp_delta_manpower
			max = map_africa_manpower_pool_free
		}		
	}
	
	add_to_variable = { map_africa_military_personnel_pool_indexes^temp_target_region =	temp_delta_manpower }
	subtract_from_variable = { map_africa_manpower_pool_free = temp_delta_manpower }
}

# Deprecated
africa_manpower_global_data = {
	set_variable = { WGN_africa_manpower_var = 0 }
	add_to_variable = { WGN_africa_manpower_var = map_africa_military_personnel_pool_indexes^global.map_africa_center_region_index }
	add_to_variable = { WGN_africa_manpower_var = map_africa_military_personnel_pool_indexes^global.map_africa_sahel_region_index }
	add_to_variable = { WGN_africa_manpower_var = map_africa_military_personnel_pool_indexes^global.map_africa_middle_east_region_index }
	add_to_variable = { WGN_africa_manpower_var = map_africa_military_personnel_pool_indexes^global.map_africa_madagascar_region_index }
	add_to_variable = { WGN_africa_manpower_var = map_africa_military_personnel_pool_indexes^global.map_africa_zimbabwe_region_index }
	add_to_variable = { WGN_africa_manpower_var = map_africa_military_personnel_pool_indexes^global.map_africa_dr_congo_region_index }
	add_to_variable = { WGN_africa_manpower_var = map_africa_military_personnel_pool_indexes^global.map_africa_venesuella_region_index }
	add_to_variable = { WGN_africa_manpower_var = map_africa_military_personnel_pool_indexes^global.map_africa_libya_region_index }
	add_to_variable = { WGN_africa_manpower_var = map_africa_military_personnel_pool_indexes^global.map_africa_sudan_region_index }
	add_to_variable = { WGN_africa_manpower_var = map_africa_military_personnel_pool_indexes^global.map_africa_gvinea_region_index }
}


# Deprecated
africa_political_strategists_global_data = {
	set_variable = { WGN_africa_political_strategists_var = 0 }
	add_to_variable = { WGN_africa_political_strategists_var = map_africa_political_strategists_pool_indexes^global.map_africa_center_region_index }
	add_to_variable = { WGN_africa_political_strategists_var = map_africa_political_strategists_pool_indexes^global.map_africa_sahel_region_index }
	add_to_variable = { WGN_africa_political_strategists_var = map_africa_political_strategists_pool_indexes^global.map_africa_middle_east_region_index }
	add_to_variable = { WGN_africa_political_strategists_var = map_africa_political_strategists_pool_indexes^global.map_africa_madagascar_region_index }
	add_to_variable = { WGN_africa_political_strategists_var = map_africa_political_strategists_pool_indexes^global.map_africa_zimbabwe_region_index }
	add_to_variable = { WGN_africa_political_strategists_var = map_africa_political_strategists_pool_indexes^global.map_africa_dr_congo_region_index }
	add_to_variable = { WGN_africa_political_strategists_var = map_africa_political_strategists_pool_indexes^global.map_africa_venesuella_region_index }
	add_to_variable = { WGN_africa_political_strategists_var = map_africa_political_strategists_pool_indexes^global.map_africa_libya_region_index }
	add_to_variable = { WGN_africa_political_strategists_var = map_africa_political_strategists_pool_indexes^global.map_africa_sudan_region_index }
	add_to_variable = { WGN_africa_political_strategists_var = map_africa_political_strategists_pool_indexes^global.map_africa_gvinea_region_index }
}


# Deprecated
africa_instructors_global_data = {
	set_variable = { WGN_africa_instructors_var = 0 }
	add_to_variable = { WGN_africa_instructors_var = map_africa_military_instructors_pool_indexes^global.map_africa_center_region_index }
	add_to_variable = { WGN_africa_instructors_var = map_africa_military_instructors_pool_indexes^global.map_africa_sahel_region_index }
	add_to_variable = { WGN_africa_instructors_var = map_africa_military_instructors_pool_indexes^global.map_africa_middle_east_region_index }
	add_to_variable = { WGN_africa_instructors_var = map_africa_military_instructors_pool_indexes^global.map_africa_madagascar_region_index }
	add_to_variable = { WGN_africa_instructors_var = map_africa_military_instructors_pool_indexes^global.map_africa_zimbabwe_region_index }
	add_to_variable = { WGN_africa_instructors_var = map_africa_military_instructors_pool_indexes^global.map_africa_dr_congo_region_index }
	add_to_variable = { WGN_africa_instructors_var = map_africa_military_instructors_pool_indexes^global.map_africa_venesuella_region_index }
	add_to_variable = { WGN_africa_instructors_var = map_africa_military_instructors_pool_indexes^global.map_africa_libya_region_index }
	add_to_variable = { WGN_africa_instructors_var = map_africa_military_instructors_pool_indexes^global.map_africa_sudan_region_index }
	add_to_variable = { WGN_africa_instructors_var = map_africa_military_instructors_pool_indexes^global.map_africa_gvinea_region_index }
}

# РАСЧЕТ АФРИКАНСКИХ АКТИВОВ(УПРОЩЕННЫЙ) - ДОХОДЫ
africa_activities_plus_global_data = {
	set_variable = { WGN_africa_activities_plus_var = 0 }
	add_to_variable = { WGN_africa_activities_plus_var = WGN_african_actives_CAR_var }
	add_to_variable = { WGN_africa_activities_plus_var = WGN_african_actives_Sudan_var }
	add_to_variable = { WGN_africa_activities_plus_var = WGN_african_actives_Madagaskar_var }
	add_to_variable = { WGN_africa_activities_plus_var = WGN_african_actives_Libia_var }
	add_to_variable = { WGN_africa_activities_plus_var = WGN_african_actives_Syria_var }
	add_to_variable = { WGN_africa_activities_plus_var = WGN_african_actives_Mali_var }
}
# РАСЧЕТ АФРИКАНСКИХ АКТИВОВ(УПРОЩЕННЫЙ) - РАСХОДЫ
africa_activities_minus_global_data = {
	set_variable = { WGN_africa_activities_minus_var = 0 }
	add_to_variable = { WGN_africa_activities_minus_var = WGN_african_actives_minus_CAR_var }
	add_to_variable = { WGN_africa_activities_minus_var = WGN_african_actives_minus_Sudan_var }
	add_to_variable = { WGN_africa_activities_minus_var = WGN_african_actives_minus_Madagaskar_var }
	add_to_variable = { WGN_africa_activities_minus_var = WGN_african_actives_minus_Libia_var }
	add_to_variable = { WGN_africa_activities_minus_var = WGN_african_actives_minus_Syria_var }
	add_to_variable = { WGN_africa_activities_minus_var = WGN_african_actives_minus_Mali_var }
}

# РАСЧЕТ АФРИКАНСКИХ ДОТАЦИЙ
africa_activities_minus_global_data = {
	set_variable = { WGN_africa_activities_minus_var = 0 }
	add_to_variable = { WGN_africa_activities_minus_var = WGN_african_actives_minus_CAR_var }
	add_to_variable = { WGN_africa_activities_minus_var = WGN_african_actives_minus_Sudan_var }
	add_to_variable = { WGN_africa_activities_minus_var = WGN_african_actives_minus_Madagaskar_var }
	add_to_variable = { WGN_africa_activities_minus_var = WGN_african_actives_minus_Libia_var }
	add_to_variable = { WGN_africa_activities_minus_var = WGN_african_actives_minus_Syria_var }
	add_to_variable = { WGN_africa_activities_minus_var = WGN_african_actives_minus_Mali_var }
}

map_africa_tick_ai_regions_manpower_pools = {
	every_country = {
		limit = { has_country_flag = map_africa }

		if = {
			limit = { OR = { 
				is_ai = yes 
				NOT = { has_country_flag = map_africa_active_manpower_ai_disable }
			} }
			map_africa_tick_ai_country_regions_manpower_pools = yes
		}
	}
}

map_africa_tick = {
	map_africa_calculate_sum_active_manpower = yes
	map_africa_calculate_sum_used_manpower = yes
	map_africa_calculate_sum_recommended_manpower = yes
}

# THIS scope is COUNTRY
map_africa_tick_ai_country_regions_manpower_pools = {
	# Remove all menpower resources from all regions to pool_free
	for_loop_effect = {
		end = global.map_africa_region_indexes_count
		value = pointer
		
		add_to_variable = { map_africa_manpower_pool_free = map_africa_military_instructors_pool_indexes^pointer }
		add_to_variable = { map_africa_manpower_pool_free = map_africa_military_personnel_pool_indexes^pointer }

		set_variable = { map_africa_military_instructors_pool_indexes^pointer = 0 }
		set_variable = { map_africa_military_personnel_pool_indexes^pointer = 0 }
	}
	
	set_temp_variable = { temp_sum_recommended = map_africa_military_instructors_sum_recommended }
	add_to_temp_variable = { temp_sum_recommended = map_africa_military_personnel_sum_recommended }

	set_temp_variable = { temp_manpower_factor = map_africa_manpower_pool_free }
	divide_temp_variable = { temp_manpower_factor = temp_sum_recommended }
	
	clamp_temp_variable = { var = temp_manpower_factor min = 0 max = 1 }

	for_loop_effect = {
		end = global.map_africa_region_indexes_count
		value = pointer

		set_variable = { map_africa_political_strategists_pool_indexes^pointer = map_africa_political_strategists_recommended_pool_indexes^pointer }

		set_variable = { map_africa_military_instructors_pool_indexes^pointer = temp_manpower_factor }
		multiply_variable = { map_africa_military_instructors_pool_indexes^pointer = map_africa_military_instructors_recommended_pool_indexes^pointer }

		set_variable = { map_africa_military_personnel_pool_indexes^pointer = temp_manpower_factor }
		multiply_variable = { map_africa_military_personnel_pool_indexes^pointer = map_africa_military_personnel_recommended_pool_indexes^pointer }

		round_variable = map_africa_military_instructors_pool_indexes^pointer
		round_variable = map_africa_military_personnel_pool_indexes^pointer

		subtract_from_variable = { map_africa_manpower_pool_free = map_africa_military_instructors_pool_indexes^pointer }
		subtract_from_variable = { map_africa_manpower_pool_free = map_africa_military_personnel_pool_indexes^pointer }
	}
}

map_africa_calculate_sum_active_manpower = {		
	set_variable = { map_africa_political_strategists_pool_active = 0 }
	set_variable = { map_africa_military_instructors_pool_active = 0 }
	set_variable = { map_africa_military_personnel_pool_active = 0 }

	# Pools indexes
	for_loop_effect = {
		end = global.map_africa_region_indexes_count
		value = pointer

		add_to_variable = { map_africa_political_strategists_pool_active = map_africa_military_personnel_pool_indexes^pointer }
		add_to_variable = { map_africa_military_instructors_pool_active = map_africa_political_strategists_pool_indexes^pointer }
		add_to_variable = { map_africa_military_personnel_pool_active = map_africa_military_instructors_pool_indexes^pointer }
	}

	set_variable = { map_africa_manpower_pool_active = map_africa_military_instructors_pool_active }
	add_to_variable = { map_africa_manpower_pool_active = map_africa_military_personnel_pool_active }
}

map_africa_WGN_attack_pre_effect = {
	set_variable = { WGN_attack_political_strateg_tv = map_africa_political_strategists_pool_indexes^map_africa_selected_region } 
	divide_variable = { WGN_attack_political_strateg_tv = 10 } 
	add_to_variable = { WGN_attack_political_strateg_tv = 1 }
	
	
	set_variable = { WGN_attack_count_tv = 0.5 } 
	set_variable = { WGN_attack_balance_count_tv = 0.05 } 
	
	multiply_variable = { WGN_attack_count_tv = WGN_attack_political_strateg_tv }
	multiply_variable = { WGN_attack_balance_count_tv = WGN_attack_political_strateg_tv }
	
	set_variable = { WGN_addendum_count_tv = 0.35 } 
	set_variable = { WGN_attack_balance_addendum_count_tv = 0.065 }
	
	multiply_variable = { WGN_addendum_count_tv = WGN_attack_political_strateg_tv }
	multiply_variable = { WGN_attack_balance_addendum_count_tv = WGN_attack_political_strateg_tv }
}

map_africa_WGN_attack_effect = {
	subtract_from_variable = { map_africa_interpreter_NTO^global.map_africa_selected_region = WGN_attack_count_tv }
	subtract_from_variable = { WGN_budget_var = WGN_attack_balance_count_tv }
}

map_africa_WGN_addendum_effect = {
	add_to_variable = { map_africa_interpreter_RUS^global.map_africa_selected_region = WGN_addendum_count_tv }
	subtract_from_variable = { WGN_budget_var = WGN_attack_balance_addendum_count_tv }
}

WGN_libya_button_effect = {
	set_variable = { map_africa_selected_region = global.map_africa_libya_region_index }
	map_africa_WGN_attack_pre_effect = yes
	clr_country_flag = WGN_africa_scripted_gui_page_1 
	set_country_flag = WGN_africa_scripted_gui_page_2 
	set_country_flag = WGN_local_stategical_map_second_capital
	set_variable = { WGN_local_stategical_map_X_position = 85 } 
	set_variable = { WGN_local_stategical_map_Y_position = 10 } 
	set_variable = { WGN_local_stategical_map_capital_button_X_position = 410 } 
	set_variable = { WGN_local_stategical_map_capital_button_Y_position = 38 } 
	set_variable = { WGN_local_stategical_map_second_capital_button_X_position = 197 } 
	set_variable = { WGN_local_stategical_map_second_capital_button_Y_position = 15 } 
	set_country_flag = WGN_local_stategical_map_WAG_1_cf 
	set_country_flag = WGN_local_stategical_map_WAG_2_cf 
	set_country_flag = WGN_local_stategical_map_WAG_3_cf 
	set_country_flag = WGN_local_stategical_map_WAG_4_cf 
	set_country_flag = WGN_local_stategical_map_WAG_5_cf 
	set_variable = { WGN_local_stategical_map_WAG_1_button_X_position = 300 } 
	set_variable = { WGN_local_stategical_map_WAG_1_button_Y_position = 140 }
	set_variable = { WGN_local_stategical_map_WAG_2_button_X_position = 430 } 
	set_variable = { WGN_local_stategical_map_WAG_2_button_Y_position = 80 }
	set_variable = { WGN_local_stategical_map_WAG_3_button_X_position = 355 } 
	set_variable = { WGN_local_stategical_map_WAG_3_button_Y_position = 90 }
	set_variable = { WGN_local_stategical_map_WAG_4_button_X_position = 155 } 
	set_variable = { WGN_local_stategical_map_WAG_4_button_Y_position = 238 }
	set_variable = { WGN_local_stategical_map_WAG_5_button_X_position = 455 } 
	set_variable = { WGN_local_stategical_map_WAG_5_button_Y_position = 138 }
}

WGN_sudan_button_effect = {
	set_variable = { map_africa_selected_region = global.map_africa_sudan_region_index }
	map_africa_WGN_attack_pre_effect = yes
	clr_country_flag = WGN_africa_scripted_gui_page_1 
	set_country_flag = WGN_africa_scripted_gui_page_2 
	set_variable = { WGN_local_stategical_map_X_position = 145 } 
	set_variable = { WGN_local_stategical_map_Y_position = 10 } 
	set_variable = { WGN_local_stategical_map_capital_button_X_position = 390 } 
	set_variable = { WGN_local_stategical_map_capital_button_Y_position = 175 } 
	set_country_flag = WGN_local_stategical_map_WAG_1_cf 
	set_country_flag = WGN_local_stategical_map_WAG_2_cf 
	set_country_flag = WGN_local_stategical_map_WAG_3_cf 
	set_variable = { WGN_local_stategical_map_WAG_1_button_X_position = 330 } 
	set_variable = { WGN_local_stategical_map_WAG_1_button_Y_position = 232 }
	set_variable = { WGN_local_stategical_map_WAG_2_button_X_position = 185 } 
	set_variable = { WGN_local_stategical_map_WAG_2_button_Y_position = 310 }
	set_variable = { WGN_local_stategical_map_WAG_3_button_X_position = 400 } 
	set_variable = { WGN_local_stategical_map_WAG_3_button_Y_position = 110 }
}

WGN_gvinea_button_effect = {
	set_variable = { map_africa_selected_region = global.map_africa_gvinea_region_index }
	map_africa_WGN_attack_pre_effect = yes
	clr_country_flag = WGN_africa_scripted_gui_page_1 
	set_country_flag = WGN_africa_scripted_gui_page_2 
	set_country_flag = WGN_local_stategical_map_second_capital
	set_variable = { WGN_local_stategical_map_X_position = 50 } 
	set_variable = { WGN_local_stategical_map_Y_position = 60 } 
	set_variable = { WGN_local_stategical_map_capital_button_X_position = 210 } 
	set_variable = { WGN_local_stategical_map_capital_button_Y_position = 225 }
	set_variable = { WGN_local_stategical_map_second_capital_button_X_position = 95 } 
	set_variable = { WGN_local_stategical_map_second_capital_button_Y_position = 100 } 
}

WGN_drc_button_effect = {
	set_variable = { map_africa_selected_region = global.map_africa_dr_congo_region_index }
	map_africa_WGN_attack_pre_effect = yes
	clr_country_flag = WGN_africa_scripted_gui_page_1 
	set_country_flag = WGN_africa_scripted_gui_page_2 
	set_variable = { WGN_local_stategical_map_X_position = 80 } 
	set_variable = { WGN_local_stategical_map_Y_position = 10 } 
	set_variable = { WGN_local_stategical_map_capital_button_X_position = 150 } 
	set_variable = { WGN_local_stategical_map_capital_button_Y_position = 230 } 
	set_country_flag = WGN_local_stategical_map_WAG_1_cf 
	set_variable = { WGN_local_stategical_map_WAG_1_button_X_position = 500 } 
	set_variable = { WGN_local_stategical_map_WAG_1_button_Y_position = 169 }
}

WGN_venezuela_button_effect = {
	set_variable = { map_africa_selected_region = global.map_africa_venesuella_region_index }
	map_africa_WGN_attack_pre_effect = yes
	clr_country_flag = WGN_africa_scripted_gui_page_1 
	set_country_flag = WGN_africa_scripted_gui_page_2 
	set_variable = { WGN_local_stategical_map_X_position = 60 } 
	set_variable = { WGN_local_stategical_map_Y_position = 10 } 
	set_variable = { WGN_local_stategical_map_capital_button_X_position = 305 } 
	set_variable = { WGN_local_stategical_map_capital_button_Y_position = 65 } 
	set_country_flag = WGN_local_stategical_map_WAG_1_cf 
	set_variable = { WGN_local_stategical_map_WAG_1_button_X_position = 330 } 
	set_variable = { WGN_local_stategical_map_WAG_1_button_Y_position = 90 } 
}

WGN_madagascar_button_effect = {
	set_variable = { map_africa_selected_region = global.map_africa_madagascar_region_index }
	map_africa_WGN_attack_pre_effect = yes
	clr_country_flag = WGN_africa_scripted_gui_page_1 
	set_country_flag = WGN_africa_scripted_gui_page_2 
	set_variable = { WGN_local_stategical_map_X_position = 190 } 
	set_variable = { WGN_local_stategical_map_Y_position = 10 } 
	set_variable = { WGN_local_stategical_map_capital_button_X_position = 325 } 
	set_variable = { WGN_local_stategical_map_capital_button_Y_position = 253 } 
	set_country_flag = WGN_local_stategical_map_WAG_1_cf 
	set_variable = { WGN_local_stategical_map_WAG_1_button_X_position = 330 } 
	set_variable = { WGN_local_stategical_map_WAG_1_button_Y_position = 165 } 
}

WGN_zimbabwe_button_effect = {
	set_variable = { map_africa_selected_region = global.map_africa_zimbabwe_region_index }
	map_africa_WGN_attack_pre_effect = yes
	clr_country_flag = WGN_africa_scripted_gui_page_1 
	set_country_flag = WGN_africa_scripted_gui_page_2 
	set_variable = { WGN_local_stategical_map_X_position = 70 } 
	set_variable = { WGN_local_stategical_map_Y_position = 20 } 
	set_variable = { WGN_local_stategical_map_capital_button_X_position = 380 } 
	set_variable = { WGN_local_stategical_map_capital_button_Y_position = 125 } 
}

WGN_car_button_effect = {
	set_variable = { map_africa_selected_region = global.map_africa_center_region_index }
	map_africa_WGN_attack_pre_effect = yes
	clr_country_flag = WGN_africa_scripted_gui_page_1 
	set_country_flag = WGN_africa_scripted_gui_page_2 
	set_country_flag = WGN_local_stategical_map_WAG_1_cf 
	set_country_flag = WGN_local_stategical_map_WAG_2_cf 
	set_country_flag = WGN_local_stategical_map_WAG_3_cf
	set_country_flag = WGN_local_stategical_map_WAG_4_cf
	set_country_flag = WGN_local_stategical_map_WAG_5_cf
	set_country_flag = WGN_local_stategical_map_WAG_6_cf
	set_variable = { WGN_local_stategical_map_X_position = -10 } 
	set_variable = { WGN_local_stategical_map_Y_position = 20 } 
	set_variable = { WGN_local_stategical_map_capital_button_X_position = 192 } 
	set_variable = { WGN_local_stategical_map_capital_button_Y_position = 353 } 
	set_variable = { WGN_local_stategical_map_WAG_1_button_X_position = 170 } 
	set_variable = { WGN_local_stategical_map_WAG_1_button_Y_position = 385 } 
	set_variable = { WGN_local_stategical_map_WAG_2_button_X_position = 240 } 
	set_variable = { WGN_local_stategical_map_WAG_2_button_Y_position = 270 } 
	set_variable = { WGN_local_stategical_map_WAG_3_button_X_position = 400 } 
	set_variable = { WGN_local_stategical_map_WAG_3_button_Y_position = 250 } 
	set_variable = { WGN_local_stategical_map_WAG_4_button_X_position = 296 } 
	set_variable = { WGN_local_stategical_map_WAG_4_button_Y_position = 283 } 
	set_variable = { WGN_local_stategical_map_WAG_5_button_X_position = 130 } 
	set_variable = { WGN_local_stategical_map_WAG_5_button_Y_position = 348 } 
	set_variable = { WGN_local_stategical_map_WAG_6_button_X_position = 45 } 
	set_variable = { WGN_local_stategical_map_WAG_6_button_Y_position = 270 } 
}

WGN_mali_button_effect = {
	set_variable = { map_africa_selected_region = global.map_africa_sahel_region_index }
	map_africa_WGN_attack_pre_effect = yes
	clr_country_flag = WGN_africa_scripted_gui_page_1 
	set_country_flag = WGN_africa_scripted_gui_page_2 
	set_variable = { WGN_local_stategical_map_X_position = 50 } 
	set_variable = { WGN_local_stategical_map_Y_position = 10 } 
	set_variable = { WGN_local_stategical_map_capital_button_X_position = 180 }
	set_variable = { WGN_local_stategical_map_capital_button_Y_position = 425 }
	set_country_flag = WGN_local_stategical_map_WAG_1_cf
	set_variable = { WGN_local_stategical_map_WAG_1_button_X_position = 350 } 
	set_variable = { WGN_local_stategical_map_WAG_1_button_Y_position = 295 } 
	
	if = {
		limit = { has_country_flag = WGN_mali_gold_accept_cf }
		set_country_flag = WGN_local_stategical_map_WAG_2_cf
		set_variable = { WGN_local_stategical_map_WAG_2_button_X_position = 230 } 
		set_variable = { WGN_local_stategical_map_WAG_2_button_Y_position = 475 } 
	}
	
	if = {
		limit = { has_country_flag = WGN_operations_in_timbykty_cf }
		set_country_flag = WGN_local_stategical_map_WAG_3_cf
		set_variable = { WGN_local_stategical_map_WAG_3_button_X_position = 370 } 
		set_variable = { WGN_local_stategical_map_WAG_3_button_Y_position = 265 } 
	}
}

WGN_syria_button_effect = {
	set_variable = { map_africa_selected_region = global.map_africa_middle_east_region_index }
	map_africa_WGN_attack_pre_effect = yes
	clr_country_flag = WGN_africa_scripted_gui_page_1 
	set_country_flag = WGN_africa_scripted_gui_page_2 
	set_country_flag = WGN_local_stategical_map_RUS_1_cf 
	set_country_flag = WGN_local_stategical_map_RUS_2_cf
	set_country_flag = WGN_local_stategical_map_WAG_1_cf 
	set_country_flag = WGN_local_stategical_map_WAG_2_cf 		
	set_country_flag = WGN_local_stategical_map_WAG_3_cf
	set_country_flag = WGN_local_stategical_map_WAG_4_cf
	set_country_flag = WGN_local_stategical_map_WAG_5_cf
	set_variable = { WGN_local_stategical_map_X_position = 80 } 
	set_variable = { WGN_local_stategical_map_Y_position = 20 } 
	set_variable = { WGN_local_stategical_map_capital_button_X_position = 125 }
	set_variable = { WGN_local_stategical_map_capital_button_Y_position = 370 }
	set_variable = { WGN_local_stategical_map_WAG_1_button_X_position = 310 } 
	set_variable = { WGN_local_stategical_map_WAG_1_button_Y_position = 275 } 
	set_variable = { WGN_local_stategical_map_WAG_2_button_X_position = 445 } 
	set_variable = { WGN_local_stategical_map_WAG_2_button_Y_position = 210 } 
	set_variable = { WGN_local_stategical_map_WAG_3_button_X_position = 245 } 
	set_variable = { WGN_local_stategical_map_WAG_3_button_Y_position = 315 } 
	set_variable = { WGN_local_stategical_map_WAG_4_button_X_position = 250 } 
	set_variable = { WGN_local_stategical_map_WAG_4_button_Y_position = 215 } 
	set_variable = { WGN_local_stategical_map_WAG_5_button_X_position = 210 } 
	set_variable = { WGN_local_stategical_map_WAG_5_button_Y_position = 130 } 
	set_variable = { WGN_local_stategical_map_RUS_1_button_X_position = 85 }
	set_variable = { WGN_local_stategical_map_RUS_1_button_Y_position = 180 }
	set_variable = { WGN_local_stategical_map_RUS_2_button_X_position = 90 }
	set_variable = { WGN_local_stategical_map_RUS_2_button_Y_position = 245 }
}